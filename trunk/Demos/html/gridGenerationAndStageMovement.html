
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      -->
      <title>gridGenerationAndStageMovement</title>
      <meta name="generator" content="MATLAB 7.3">
      <meta name="date" content="2007-10-05">
      <meta name="m-file" content="gridGenerationAndStageMovement"><style>

body {
  background-color: white;
  margin:10px;
}

h1 {
  color: #990000; 
  font-size: x-large;
}

h2 {
  color: #990000;
  font-size: medium;
}

/* Make the text shrink to fit narrow windows, but not stretch too far in 
wide windows. */ 
p,h1,h2,div.content div {
  max-width: 600px;
  /* Hack for IE6 */
  width: auto !important; width: 600px;
}

pre.codeinput {
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
} 

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #A020F0}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

  </style></head>
   <body>
      <div class="content">
         <h2>Contents</h2>
         <div>
            <ul>
               <li><a href="#1">Create the grid</a></li>
               <li><a href="#2">Plot the grid</a></li>
               <li><a href="#3">visit all grid points</a></li>
               <li><a href="#4">plot real grid</a></li>
               <li><a href="#5">histogram of error</a></li>
            </ul>
         </div>
         <h2>Create the grid<a name="1"></a></h2><pre class="codeinput">Pos=createAcqPattern(<span class="string">'grid'</span>,[0 0],10,10,1000,zeros(100,1));
</pre><h2>Plot the grid<a name="2"></a></h2><pre class="codeinput">figure(1)
clf
hold <span class="string">on</span>
plot([Pos(:).X],[Pos(:).Y],<span class="string">'.-'</span>);
</pre><img vspace="5" hspace="5" src="gridGenerationAndStageMovement_01.png"> <h2>visit all grid points<a name="3"></a></h2><pre class="codeinput">set(rS,<span class="string">'x'</span>,0,<span class="string">'y'</span>,0,<span class="string">'z'</span>,0)
<span class="keyword">for</span> i=1:100
    tic
    fprintf(<span class="string">'Not attempting %g %g\n'</span>,Pos(i).X,Pos(i).Y);
    set(rS,<span class="string">'x'</span>,Pos(i).X,<span class="string">'y'</span>,Pos(i).Y,<span class="string">'z'</span>,Pos(i).Z)
    <span class="keyword">while</span> get(rS,<span class="string">'stageBusy'</span>)
        disp(<span class="string">'pausing'</span>)
        pause(0.01)
    <span class="keyword">end</span>
    [x(i),y(i),z(i)]=get(rS,<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'z'</span>);
    tm(i)=toc;
<span class="keyword">end</span>
</pre><pre class="codeoutput">Not attempting -4000 -4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 -4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 -4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 -4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 -4000
pausing
pausing
pausing
Not attempting 1000 -4000
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 2000 -4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 -4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 -4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 -4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -4000 -3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 -3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 -3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 -3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 -3000
pausing
pausing
pausing
pausing
Not attempting 1000 -3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 2000 -3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 -3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 -3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 -3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -4000 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 1000 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 2000 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 -2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -4000 -1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 -1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 -1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 -1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 -1000
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 1000 -1000
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 2000 -1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 -1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 -1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 -1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -4000 0
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 0
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 0
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 0
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 0
pausing
pausing
pausing
pausing
Not attempting 1000 0
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 2000 0
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 0
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 0
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 0
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -4000 1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 1000
pausing
pausing
pausing
pausing
pausing
Not attempting 1000 1000
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 2000 1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 1000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -4000 2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 2000
pausing
pausing
pausing
pausing
pausing
Not attempting 1000 2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 2000 2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 2000
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 2000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -4000 3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 3000
pausing
pausing
pausing
pausing
Not attempting 1000 3000
pausing
pausing
pausing
pausing
Not attempting 2000 3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 3000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -4000 4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 4000
pausing
pausing
pausing
pausing
pausing
Not attempting 1000 4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 2000 4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 4000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -4000 5000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -3000 5000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -2000 5000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting -1000 5000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 0 5000
pausing
pausing
pausing
pausing
pausing
Not attempting 1000 5000
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 2000 5000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 3000 5000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 4000 5000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
Not attempting 5000 5000
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
pausing
</pre><h2>plot real grid<a name="4"></a></h2><pre class="codeinput">scatter(x,y,tm*10,[1 0 0])
</pre><img vspace="5" hspace="5" src="gridGenerationAndStageMovement_02.png"> <h2>histogram of error<a name="5"></a></h2><pre class="codeinput">figure(2)
clf
hold <span class="string">on</span>
dx=(x-[Pos(:).X])';
dy=(y-[Pos(:).Y])';
hist([dx dy ],15)
legend(<span class="string">'dX'</span>,<span class="string">'dY'</span>)
xlabel(<span class="string">'positioning error in micron'</span>)
text(0.4,20,[<span class="string">'mean:'</span> num2str(mean([dy; dx])) <span class="string">' std:'</span> num2str(std([dy; dx]))])
</pre><img vspace="5" hspace="5" src="gridGenerationAndStageMovement_03.png"> <p class="footer"><br>
            Published with MATLAB&reg; 7.3<br></p>
      </div>
      <!--
##### SOURCE BEGIN #####
%% Create the grid
Pos=createAcqPattern('grid',[0 0],10,10,1000,zeros(100,1));

%% Plot the grid 
figure(1)
clf
hold on
plot([Pos(:).X],[Pos(:).Y],'.-');

%% visit all grid points
set(rS,'x',0,'y',0,'z',0)
for i=1:100
    tic
    fprintf('Not attempting %g %g\n',Pos(i).X,Pos(i).Y);
    set(rS,'x',Pos(i).X,'y',Pos(i).Y,'z',Pos(i).Z)
    while get(rS,'stageBusy')
        disp('pausing')
        pause(0.01)
    end
    [x(i),y(i),z(i)]=get(rS,'x','y','z');
    tm(i)=toc;
end

%% plot real grid
scatter(x,y,tm*10,[1 0 0])

%% histogram of error
figure(2)
clf
hold on
dx=(x-[Pos(:).X])';
dy=(y-[Pos(:).Y])';
hist([dx dy ],15)
legend('dX','dY')
xlabel('positioning error in micron')
text(0.4,20,['mean:' num2str(mean([dy; dx])) ' std:' num2str(std([dy; dx]))])


##### SOURCE END #####
-->
   </body>
</html>